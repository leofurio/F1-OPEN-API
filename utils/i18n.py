LANG_DEFAULT = "it"

TRANSLATIONS = {
    "it": {
        "page_title": "OpenF1 - Driver Comparison Dashboard",
        "intro": "Flusso: Anno > Circuito > Sessione > Drivers > Lap > Telemetria + Location + Delta time.",
        "year_label": "Anno",
        "year_placeholder": "Es. 2024",
        "load_meetings": "Carica Circuiti",
        "meeting_label": "Circuito (Gran Premio)",
        "session_label": "Sessione",
        "driver1_label": "Pilota 1",
        "lap1_label": "Giro Pilota 1",
        "driver2_label": "Pilota 2",
        "lap2_label": "Giro Pilota 2",
        "tab_telemetry": "Telemetria giro",
        "tab_all_laps": "Confronto giri per i 2 piloti selezionati",
        "tab_best_laps": "Miglior giro per pilota",
        "graph_order": "Ordine grafici:",
        "move_up": "Sposta su",
        "move_down": "Sposta giù",
        "reset_order": "Reset ordine",
        "print_pdf": "Stampa PDF",
        "status_select_session": "Seleziona una sessione.",
        "status_no_laps": "Nessun giro trovato.",
        "status_laps_summary": "Laps: {laps} | Drivers: {drivers} | Max lap: {max_lap}",
        "meetings_error": "Errore: {error}",
        "meetings_none": "Nessun circuito trovato.",
        "meetings_loaded": "Circuiti caricati: {count}",
        "sessions_select_meeting": "Seleziona un circuito.",
        "sessions_error": "Errore: {error}",
        "sessions_none": "Nessuna sessione trovata.",
        "sessions_loaded": "Sessioni caricate: {count}",
        "laps_select_two": "Seleziona i due piloti per mostrare il miglior giro della sessione.",
        "lap_unavailable": "Tempo giro non disponibile per la selezione corrente.",
        "lap_fast_equal": "Tempi equivalenti: {lap1} e {lap2} entrambi in {time}.",
        "lap_fast_winner": "Giro più veloce: {winner} ({time})",
        "lap_fast_advantage": "vantaggio {delta} su {other}.",
        "all_laps_prompt": "Seleziona sessione e due piloti per confrontare tutti i giri.",
        "all_laps_none": "Nessun giro disponibile per i piloti selezionati.",
        "times_title": "Tempi giro - {d1} vs {d2}",
        "times_y": "Tempo giro (s)",
        "delta_title": "Delta tempo per giro ({d2} - {d1})",
        "delta_y": "Delta (s, negativo = Driver 2 più veloce)",
        "delta_no_common": "Nessun lap in comune per calcolare il delta.",
        "delta_need_drivers": "Seleziona due piloti con giri disponibili per il delta.",
        "heatmap_title": "Heatmap tempi giro (verticale)",
        "heatmap_x": "Pilota / Delta / Delta cumulativo",
        "heatmap_y": "Lap",
        "heatmap_none": "Nessun giro per creare la heatmap.",
        "heatmap_nodata": "Nessun tempo disponibile per creare la heatmap.",
        "summary_none": "{driver}: nessun giro valido.",
        "summary_stats": "{driver}: giri validi {count}, miglior lap {best_lap} ({best_time}), media {avg}",
        "graphs_select": "Seleziona sessione, piloti e giri.",
        "track_unavailable": "Tracciato GPS non disponibile",
        "track_title": "Tracciato GPS",
        "delta_unavailable": "Delta tempo non disponibile",
        "delta_graph_title": "Delta tempo",
        "telemetry_x": "Tempo relativo (s)",
        "progress_x": "Progresso giro (%)",
        "delta_y_time": "Delta tempo (s)",
        "speed_title": "Velocità{suffix}",
        "speed_y": "Velocità (km/h)",
        "heat_speed_title": "Heatmap velocità{suffix}",
        "throttle_title": "Throttle{suffix}",
        "brake_title": "Brake{suffix}",
        "gear_title": "Marcia{suffix}",
        "finish_label": "Traguardo",
        "error_generic": "Errore: {error}",
        "best_laps_prompt": "Carica una sessione per vedere il miglior giro di ogni pilota.",
        "best_laps_none": "Nessun giro valido per questa sessione.",
        "best_laps_driver": "Pilota",
        "best_laps_lap": "Lap",
        "best_laps_pos": "Posizione",
        "best_laps_time": "Tempo giro",
        "best_laps_s1": "Settore 1",
        "best_laps_s2": "Settore 2",
        "best_laps_s3": "Settore 3",
        "best_laps_gap": "Gap dal migliore",
        "best_laps_fastest": "Migliore",
    },
    "en": {
        "page_title": "OpenF1 - Driver Comparison Dashboard",
        "intro": "Flow: Year > Circuit > Session > Drivers > Laps > Telemetry + Location + Delta time.",
        "year_label": "Year",
        "year_placeholder": "Ex. 2024",
        "load_meetings": "Load Circuits",
        "meeting_label": "Circuit (Grand Prix)",
        "session_label": "Session",
        "driver1_label": "Driver 1",
        "lap1_label": "Driver 1 Lap",
        "driver2_label": "Driver 2",
        "lap2_label": "Driver 2 Lap",
        "tab_telemetry": "Lap telemetry",
        "tab_all_laps": "All laps comparison for the 2 selected drivers",
        "tab_best_laps": "Best lap per driver",
        "graph_order": "Graph order:",
        "move_up": "Move Up",
        "move_down": "Move Down",
        "reset_order": "Reset order",
        "print_pdf": "Print PDF",
        "status_select_session": "Select a session.",
        "status_no_laps": "No laps found.",
        "status_laps_summary": "Laps: {laps} | Drivers: {drivers} | Max lap: {max_lap}",
        "meetings_error": "Error: {error}",
        "meetings_none": "No circuits found.",
        "meetings_loaded": "Loaded circuits: {count}",
        "sessions_select_meeting": "Select a circuit.",
        "sessions_error": "Error: {error}",
        "sessions_none": "No sessions found.",
        "sessions_loaded": "Loaded sessions: {count}",
        "laps_select_two": "Select two drivers to show the session best lap.",
        "lap_unavailable": "Lap time unavailable for the current selection.",
        "lap_fast_equal": "Same time: {lap1} and {lap2} both in {time}.",
        "lap_fast_winner": "Fastest lap: {winner} ({time})",
        "lap_fast_advantage": "advantage {delta} over {other}.",
        "all_laps_prompt": "Select a session and two drivers to compare all laps.",
        "all_laps_none": "No laps available for the selected drivers.",
        "times_title": "Lap times - {d1} vs {d2}",
        "times_y": "Lap time (s)",
        "delta_title": "Lap delta ({d2} - {d1})",
        "delta_y": "Delta (s, negative = Driver 2 faster)",
        "delta_no_common": "No common laps to compute delta.",
        "delta_need_drivers": "Select two drivers with laps to compute delta.",
        "heatmap_title": "Lap times heatmap (vertical)",
        "heatmap_x": "Driver / Delta / Cumulative delta",
        "heatmap_y": "Lap",
        "heatmap_none": "No laps to build the heatmap.",
        "heatmap_nodata": "No lap times available for the heatmap.",
        "summary_none": "{driver}: no valid laps.",
        "summary_stats": "{driver}: valid laps {count}, best lap {best_lap} ({best_time}), average {avg}",
        "graphs_select": "Select session, drivers and laps.",
        "track_unavailable": "GPS track not available",
        "track_title": "GPS Track",
        "delta_unavailable": "Delta time not available",
        "delta_graph_title": "Delta time",
        "telemetry_x": "Relative time (s)",
        "progress_x": "Lap progress (%)",
        "delta_y_time": "Delta time (s)",
        "speed_title": "Speed{suffix}",
        "speed_y": "Speed (km/h)",
        "heat_speed_title": "Speed heatmap{suffix}",
        "throttle_title": "Throttle{suffix}",
        "brake_title": "Brake{suffix}",
        "gear_title": "Gear{suffix}",
        "finish_label": "Finish",
        "error_generic": "Error: {error}",
        "best_laps_prompt": "Load a session to see each driver's best lap.",
        "best_laps_none": "No valid laps for this session.",
        "best_laps_driver": "Driver",
        "best_laps_lap": "Lap",
        "best_laps_pos": "Pos",
        "best_laps_time": "Lap time",
        "best_laps_s1": "Sector 1",
        "best_laps_s2": "Sector 2",
        "best_laps_s3": "Sector 3",
        "best_laps_gap": "Gap to best",
        "best_laps_fastest": "Fastest",
    },
}


def t(lang: str, key: str, **kwargs) -> str:
    """Restituisce la traduzione per la chiave indicata."""
    lang_map = TRANSLATIONS.get(lang) or TRANSLATIONS[LANG_DEFAULT]
    template = lang_map.get(key) or TRANSLATIONS[LANG_DEFAULT].get(key, key)
    try:
        return template.format(**kwargs)
    except Exception:
        return template
